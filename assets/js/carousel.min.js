/*! (c) Mat Marquis (@wilto). MIT License. http://wil.to/3a */
(function(b,c){var a=0;b.fn.getPercentage=function(){var d=this.attr("style").match(/margin\-left:(.*[0-9])/i)&&parseInt(RegExp.$1);return d};b.fn.adjRounding=function(d){var f=b(this),h=f.find(d),g=f.parent().width()-b(h[0]).width();if(g!==0){b(h).css("position","relative");for(var e=0;e<h.length;e++){b(h[e]).css("left",(g*e)+"px")}}return this};b.fn.carousel=function(f){if(this.data("carousel-initialized")){return}this.data("carousel-initialized",true);var j={slider:".carousel",slide:".testimonial",prevSlide:null,nextSlide:null,slideHed:null,addPagination:false,addNav:(f!=c&&(f.prevSlide||f.nextSlide))?false:true,namespace:"carousel",speed:300},g=b.extend(j,f),h=this,e=(document.body||document.documentElement),k=function(){var s="transitionProperty",r=document.createElement("tester"),m=r.style,q=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),o="Webkit Moz O ms Khtml".split(" "),l=s.charAt(0).toUpperCase()+s.substr(1),p=(s+" "+o.join(l+" ")+l).split(" ");for(var n in p){if(m[p[n]]!==c){return true}}return false},i={init:function(){a++;h.each(function(r){var l=b(this),q=l.find(g.slider),o=l.find(g.slide),n=o.length,p="margin-left "+(g.speed/1000)+"s ease",m="carousel-"+a+"-"+r;if(o.length<=1){return}l.css({overflow:"hidden",width:"100%"}).attr("role","application");q.attr("id",(q[0].id||"carousel-"+a+"-"+r)).css({marginLeft:"0px","float":"left",width:100*n+"%","-webkit-transition":p,"-moz-transition":p,"-ms-transition":p,"-o-transition":p,transition:p}).bind("carouselmove",i.move).bind("nextprev",i.nextPrev).bind("navstate",i.navState);o.css({"float":"left",width:(100/n)+"%"}).each(function(t){var s=b(this);s.attr({role:"tabpanel document",id:m+"-slide"+t});if(g.addPagination){s.attr("aria-labelledby",m+"-tab"+t)}});g.addPagination&&i.addPagination();g.addNav&&i.addNav();q.trigger("navstate",{current:0})})},addNav:function(){h.each(function(n){var o=b(this),q=o.find(g.slider),p=q[0].id,l=["",'	<a href="#'+p+'" class="'+g.namespace+'-next"></a>','	<a href="#'+p+'" class="'+g.namespace+'-prev"></a>',""].join(""),m={nextSlide:"."+g.namespace+"-next",prevSlide:"."+g.namespace+"-prev"};g=b.extend(g,m);o.prepend(l)})},addPagination:function(){h.each(function(n){var o=b(this),l=b('<ol class="'+g.namespace+'-tabs" role="tablist navigation" />'),r=o.find(g.slider),q=o.find(g.slide);slideNum=q.length,associated="carousel-"+a+"-"+n;while(slideNum--){var m=b(q[slideNum]).find(g.slideHed).text()||"Page "+(slideNum+1),p=['<li role="presentation">','<a href="#'+associated+"-slide"+slideNum+'"',' aria-controls="'+associated+"-slide"+slideNum+'"',' id="'+associated+"-tab"+slideNum+'" role="tab">'+m+"</a>","</li>"].join("");l.prepend(p)}l.appendTo(o).find("li").keydown(function(v){var t=b(this),u=t.prev().find("a"),s=t.next().find("a");switch(v.which){case 37:case 38:u.length&&u.trigger("click").focus();v.preventDefault();break;case 39:case 40:s.length&&s.trigger("click").focus();v.preventDefault();break}}).find("a").click(function(v){var t=b(this);if(t.attr("aria-selected")=="false"){var u=t.parent().index(),s=-(100*(u)),w=o.find(g.slider);w.trigger("carouselmove",{moveTo:s})}v.preventDefault()})})},roundDown:function(l){var m=parseInt(l,10);return Math.ceil((m-(m%100))/100)*100},navState:function(o,r){var t=b(this),p=t.find(g.slide),n=-(r.current/100),q=b(p[n]);t.attr("aria-activedescendant",q[0].id);q.addClass(g.namespace+"-active-slide").attr("aria-hidden",false).siblings().removeClass(g.namespace+"-active-slide").attr("aria-hidden",true);if((!!g.prevSlide||!!g.nextSlide)){var m=b('[href*="#'+this.id+'"]');m.removeClass(g.namespace+"-disabled");if(n==0){m.filter(g.prevSlide).addClass(g.namespace+"-disabled")}else{if(n==p.length-1){m.filter(g.nextSlide).addClass(g.namespace+"-disabled")}}}if(!!g.addPagination){var l=q.attr("aria-labelledby"),s=b("#"+l);s.parent().addClass(g.namespace+"-active-tab").siblings().removeClass(g.namespace+"-active-tab").find("a").attr({"aria-selected":false,tabindex:-1});s.attr({"aria-selected":true,tabindex:0})}},move:function(n,m){var l=b(this);l.trigger(g.namespace+"-beforemove").trigger("navstate",{current:m.moveTo});if(k()){l.adjRounding(g.slide).css("marginLeft",m.moveTo+"%").one("transitionend webkitTransitionEnd OTransitionEnd",function(){b(this).trigger(g.namespace+"-aftermove")})}else{l.adjRounding(g.slide).animate({marginLeft:m.moveTo+"%"},{duration:g.speed,queue:false},function(){b(this).trigger(g.namespace+"-aftermove")})}},nextPrev:function(r,o){var m=b(this),q=(m)?m.getPercentage():0,p=m.find(g.slide),s=o.dir==="prev"?q!=0:-q<(p.length-1)*100,l=b('[href="#'+this.id+'"]');if(!m.is(":animated")&&s){if(o.dir==="prev"){q=(q%100!=0)?i.roundDown(q):q+100}else{q=((q%100)!=0)?i.roundDown(q)-100:q-100}m.trigger("carouselmove",{moveTo:q});l.removeClass(g.namespace+"-disabled").removeAttr("aria-disabled");switch(q){case (-(p.length-1)*100):l.filter(g.nextSlide).addClass(g.namespace+"-disabled").attr("aria-disabled",true);break;case 0:l.filter(g.prevSlide).addClass(g.namespace+"-disabled").attr("aria-disabled",true);break}}else{var n=i.roundDown(q);m.trigger("carouselmove",{moveTo:n})}}};i.init(this);b(g.nextSlide+","+g.prevSlide).bind("click",function(o){var m=b(this),n=this.hash,l=(m.is(g.prevSlide))?"prev":"next",p=b(n);if(m.is("."+g.namespace+"-disabled")){return false}p.trigger("nextprev",{dir:l});o.preventDefault()}).bind("keydown",function(n){var l=b(this),m=this.hash;switch(n.which){case 37:case 38:b("#"+m).trigger("nextprev",{dir:"next"});n.preventDefault();break;case 39:case 40:b("#"+m).trigger("nextprev",{dir:"prev"});n.preventDefault();break}});var d={wrap:this,slider:g.slider};h.bind("dragSnap",d,function(n,m){var o=b(this).find(g.slider),l=(m.direction==="left")?"next":"prev";o.trigger("nextprev",{dir:l})});h.filter("[data-autorotate]").each(function(){var p,m=b(this),n=m.attr("data-autorotate"),o=m.find(g.slide).length,l=function(){var r=m.find(g.slider),q=-(b(g.slider).getPercentage()/100)+1;switch(q){case o:clearInterval(p);p=setInterval(function(){l();r.trigger("nextprev",{dir:"prev"})},n);break;case 1:clearInterval(p);p=setInterval(function(){l();r.trigger("nextprev",{dir:"next"})},n);break}};p=setInterval(l,n);m.attr("aria-live","polite").bind("mouseenter click touchstart",function(){clearInterval(p)})});return this}})(jQuery);$.event.special.dragSnap={setup:function(b){var c=$(this),a=function(f,g){var h=0.3,i=(g)?"margin-left "+h+"s ease":"none";f.css({"-webkit-transition":i,"-moz-transition":i,"-ms-transition":i,"-o-transition":i,transition:i})},d=function(f){var f=parseInt(f,10);return Math.ceil((f-(f%100))/100)*100},e=function(k,i){var h=i.target,g=(h.attr("style")!=undefined)?h.getPercentage():0,j=(i.left===false)?d(g)-100:d(g),f=document.body,l=function(){f.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");var m=!!(f.style.transition||f.style.webkitTransition||f.style.MozTransition);return m};a(h,true);if(l()){h.css("marginLeft",j+"%")}else{h.animate({marginLeft:j+"%"},opt.speed)}};c.bind("snapback",e).bind("touchstart",function(k){var j=k.originalEvent.touches?k.originalEvent.touches[0]:k,l={time:((new Date).getTime()),coords:[j.pageX,j.pageY],origin:$(k.target).closest(b.wrap),interacting:false},g,i=$(k.target).closest(b.slider),f=(i.attr("style")!=undefined)?i.getPercentage():0;a(i,false);function h(n){var m=n.originalEvent.touches?n.originalEvent.touches[0]:n;g={time:(new Date()).getTime(),coords:[m.pageX,m.pageY]},deltaX=Math.abs(l.coords[0]-m.pageX),deltaY=Math.abs(l.coords[1]-m.pageY);if(!l||deltaX<deltaY||deltaX<15){return}if(deltaX>=15){l.interacting=true;i.css({"margin-left":f+(((g.coords[0]-l.coords[0])/l.origin.width())*100)+"%"});n.preventDefault()}else{return}}c.bind("gesturestart",function(m){c.unbind("touchmove",h).unbind("touchend",h)}).bind("touchmove",h).one("touchend",function(q){c.unbind("touchmove",h);a(i,true);if(l&&g){var n=Math.abs(l.coords[0]-g.coords[0]),m=Math.abs(l.coords[1]-g.coords[1]),p=l.coords[0]>g.coords[0],o;if(n>20&&(n>m)){q.preventDefault()}else{if(l.interacting){c.trigger("snapback",{target:i,left:p})}return}o=l.origin.width()/4;if(-n>o||n>o){l.origin.trigger("dragSnap",{direction:p?"left":"right"})}else{c.trigger("snapback",{target:i,left:p})}}l=g=undefined})})}};$(document).ready(function(){$(".testimonials-carousel").carousel({namespace:"mr-rotato"})});